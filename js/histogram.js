let myChart="";export let setHistogram=async function(t){localStorage.setItem("price-"+t.date,JSON.stringify({fuel:t.fuel,alchool:t.alchoolPrice,gasoline:t.gasPrice,date:t.date}))};export let getHistogram=function(){return Object.entries(localStorage).map((t=>t[0])).filter((t=>t.includes("price-"))).map((t=>localStorage.getItem(t)))};export let plotHistogramChart=async function(t,a){let e=t;e=dataOrderDateByFirst(t);let o={labels:[],datasets:[{label:"Gasolina",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:[],fill:!1,cubicInterpolationMode:"monotone",tension:.4,pointStyle:"circle",pointRadius:8,pointHoverRadius:16},{label:"Álcool",backgroundColor:"rgb(0, 99, 132)",borderColor:"rgb(0, 99, 132)",data:[],fill:!1,cubicInterpolationMode:"monotone",tension:.4,pointStyle:"circle",pointRadius:8,pointHoverRadius:16}]};for(var r in e)o.datasets[0].data.push(JSON.parse(e[r]).gasoline),o.datasets[1].data.push(JSON.parse(e[r]).alchool),o.labels.push(new Date(JSON.parse(e[r]).date).toLocaleString("pt-br",{timeZoneName:"short"}).split(" ")[0]);const l={type:"line",data:o};myChart=new Chart(document.querySelector("#line-chart"),l)};export let updateLineChart=async function(t){let a=dataOrderDateByFirst(t);myChart.data.datasets[0].data.push(JSON.parse(a[a.length-1]).gasoline),myChart.data.datasets[1].data.push(JSON.parse(a[a.length-1]).alchool),myChart.data.labels.push(new Date(JSON.parse(a[a.length-1]).date).toLocaleString("pt-br",{timeZoneName:"short"}).split(" ")[0]),myChart.update()};export let plotHistogramTable=async function(data,totalResults){if(totalResults=totalResults||data.length,data=dataOrderDateByLast(data),data.length>0){let html='<table>\n            <tr>\n                <td colspan="5"><h4>Histórico de preços anteriores</h4></td>\n            </tr>\n            <tr>\n                <th>Data</th>\n                <th>Melhor escolha</th>\n                <th>Preço alcool</th>\n                <th>Preço gasolina</th>\n                <th>Variação</th> \n            </tr>',obj="";for(let i=0,limI=totalResults;i<limI;i++)obj=eval("("+data[i]+")"),html+="<tr>",html+=`<td>${new Date(obj.date).toLocaleString("pt-br",{timeZoneName:"short"}).split(" ")[0]}</td>`,html+=`<td>${obj.fuel}</td>`,html+=`<td>R$ ${obj.alchool.toLocaleString("pt-br",{style:"currency",currency:"BRL"})}</td>`,html+=`<td>R$ ${obj.gasoline.toLocaleString("pt-br",{style:"currency",currency:"BRL"})}</td>`,html+="<td>-</td>",html+="</tr>";html+="<table>",$(".table-user-price-variation").html(html)}};let dataOrderDateByFirst=function(t){return t.sort(((t,a)=>(t=JSON.parse(t),a=JSON.parse(a),t.date>a.date?1:t.date<a.date?-1:void 0))),t},dataOrderDateByLast=function(t){return t.sort(((t,a)=>(t=JSON.parse(t),a=JSON.parse(a),t.date>a.date?-1:t.date<a.date?1:void 0))),t};
//# sourceMappingURL=../maps/histogram.js.map
